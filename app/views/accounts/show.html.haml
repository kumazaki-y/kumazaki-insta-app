.container
  = link_to 'Back', :back, class: 'btn btn-default'
  .profile-header
    %h1= @user.username
    - unless current_user == @user
      %button.follow-btn{ data: { user_id: @user.id, relationship_status: current_user.following?(@user) ? 'unfollow' : 'follow' } }
        = current_user.following?(@user) ? 'Unfollow' : 'Follow'

  - if @user.profile.avatar.attached?
    = image_tag @user.profile.avatar, class: 'profile-avatar'
  - else
    %p No Profile Image

  %input#avatarInput{ type: "file", name: "avatar" }

  .profile-stats
    .stat-item
      %h2= @user.articles.count
      %p Posts
    .stat-item
      = link_to account_followers_path(@user), class: 'follower-link' do
        %div#follower-count= @user.follower.count
        %p Followers
    .stat-item
      = link_to account_followings_path(@user), class: 'following-link' do
        %div= @user.following.count
        %p following

  .posts-timeline
    - @user.articles.order(created_at: :desc).each do |article|
      - if article.images.attached?
        = image_tag article.images.first, class: 'article-image'
      - else
        = image_tag 'default-image.png', class: 'default-article-image', alt: 'デフォルト画像'

